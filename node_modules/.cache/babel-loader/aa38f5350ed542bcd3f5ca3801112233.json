{"ast":null,"code":"import React,{useEffect}from'react';import cities from'../../Data/in.json';import axios from\"axios\";import{UseWeatherAppContext}from'../../Context/Context';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const ChooseStateComponents=()=>{const{state:{city},dispatch}=UseWeatherAppContext();//console.log('rohit',UseWeatherAppContext())\nconst handleChange=e=>{const selectedCity=cities.filter(city=>city.city===e.target.value)[0];//console.log('selectedCity', selectedCity);\ndispatch({type:'SET_CITY',payload:{...selectedCity}});};// API VAR\nconst APIKEY='34480b98aa332da53123a0ac63a4ea9d';let lat=city&&city.lat?city.lat:'';let long=city&&city.lng?city.lng:'';let exclude='hourly,minutely';const ULR=\"https://api.openweathermap.org/data/2.5/onecall?lat=\".concat(lat,\"&lon=\").concat(long,\"&exclude=\").concat(exclude,\"&units=metric&lang=tr&appid=\").concat(APIKEY);const fetchData=()=>{axios(ULR).then(data=>{let _daily=data.data.daily;dispatch({type:'SET_DAILY',payload:_daily});//console.log('data',data.data)\n});};useEffect(()=>{fetchData();// eslint-disable-next-line\n},[city]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"stateWrap\",children:/*#__PURE__*/_jsx(\"select\",{className:\"stateMenu\",defaultValue:city,onChange:handleChange,children:cities&&cities.length>0&&cities.map(city=>{return/*#__PURE__*/_jsxs(\"option\",{value:city.city,children:[city.city,\" -  \",city.admin_name]},\"\".concat(city.population).concat(city.lat));})})})});};export default ChooseStateComponents;","map":{"version":3,"names":["React","useEffect","cities","axios","UseWeatherAppContext","ChooseStateComponents","state","city","dispatch","handleChange","e","selectedCity","filter","target","value","type","payload","APIKEY","lat","long","lng","exclude","ULR","fetchData","then","data","_daily","daily","length","map","admin_name","population"],"sources":["C:/Users/omkar/OneDrive/Pictures/Desktop/weather/weather-app-reactjs/src/Components/ChooseState/index.js"],"sourcesContent":["import React, {useEffect} from 'react';\r\nimport cities from '../../Data/in.json';\r\n\r\nimport axios from \"axios\";\r\n\r\nimport  {UseWeatherAppContext} from '../../Context/Context';\r\n\r\nconst ChooseStateComponents = ()=>{\r\n    \r\n\r\n    const {state:{city}, dispatch} = UseWeatherAppContext();\r\n    //console.log('rohit',UseWeatherAppContext())\r\n\r\n    const handleChange = (e)=>{\r\n        const selectedCity = cities.filter(\r\n            (city) => city.city === e.target.value\r\n        )[0]\r\n        //console.log('selectedCity', selectedCity);\r\n        dispatch({\r\n            type:'SET_CITY',\r\n            payload:{...selectedCity}\r\n        })\r\n    }\r\n\r\n    // API VAR\r\n    const APIKEY = '34480b98aa332da53123a0ac63a4ea9d';\r\n    let lat = city && city.lat ? city.lat : '';\r\n    let long = city && city.lng ? city.lng : '';\r\n    let exclude = 'hourly,minutely';\r\n    const ULR =  `https://api.openweathermap.org/data/2.5/onecall?lat=${lat}&lon=${long}&exclude=${exclude}&units=metric&lang=tr&appid=${APIKEY}`\r\n    \r\n    const fetchData = ()=>{\r\n        axios(ULR).then((data)=>{\r\n            let _daily = data.data.daily\r\n            dispatch({\r\n                type:'SET_DAILY',\r\n                payload:_daily\r\n            })\r\n            \r\n            //console.log('data',data.data)\r\n        })\r\n    }\r\n    useEffect(()=>{\r\n       fetchData();\r\n       // eslint-disable-next-line\r\n    }, [city])\r\n\r\n    return (\r\n        <>\r\n            <div className='stateWrap'>\r\n                <select className='stateMenu' defaultValue={city} onChange={handleChange}>\r\n                    {\r\n                        cities && cities.length > 0  && cities.map((city)=>{\r\n                            return(\r\n                                <option key={`${city.population}${city.lat}`} value={city.city}>\r\n                                    {city.city} -  {city.admin_name}\r\n                                </option>\r\n                            )\r\n                        })\r\n                    }\r\n                </select>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ChooseStateComponents;"],"mappings":"AAAA,MAAOA,MAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,MAAOC,OAAP,KAAmB,oBAAnB,CAEA,MAAOC,MAAP,KAAkB,OAAlB,CAEA,OAASC,oBAAT,KAAoC,uBAApC,C,6IAEA,KAAMC,sBAAqB,CAAG,IAAI,CAG9B,KAAM,CAACC,KAAK,CAAC,CAACC,IAAD,CAAP,CAAeC,QAAf,EAA2BJ,oBAAoB,EAArD,CACA;AAEA,KAAMK,aAAY,CAAIC,CAAD,EAAK,CACtB,KAAMC,aAAY,CAAGT,MAAM,CAACU,MAAP,CAChBL,IAAD,EAAUA,IAAI,CAACA,IAAL,GAAcG,CAAC,CAACG,MAAF,CAASC,KADhB,EAEnB,CAFmB,CAArB,CAGA;AACAN,QAAQ,CAAC,CACLO,IAAI,CAAC,UADA,CAELC,OAAO,CAAC,CAAC,GAAGL,YAAJ,CAFH,CAAD,CAAR,CAIH,CATD,CAWA;AACA,KAAMM,OAAM,CAAG,kCAAf,CACA,GAAIC,IAAG,CAAGX,IAAI,EAAIA,IAAI,CAACW,GAAb,CAAmBX,IAAI,CAACW,GAAxB,CAA8B,EAAxC,CACA,GAAIC,KAAI,CAAGZ,IAAI,EAAIA,IAAI,CAACa,GAAb,CAAmBb,IAAI,CAACa,GAAxB,CAA8B,EAAzC,CACA,GAAIC,QAAO,CAAG,iBAAd,CACA,KAAMC,IAAG,+DAA2DJ,GAA3D,iBAAsEC,IAAtE,qBAAsFE,OAAtF,wCAA4HJ,MAA5H,CAAT,CAEA,KAAMM,UAAS,CAAG,IAAI,CAClBpB,KAAK,CAACmB,GAAD,CAAL,CAAWE,IAAX,CAAiBC,IAAD,EAAQ,CACpB,GAAIC,OAAM,CAAGD,IAAI,CAACA,IAAL,CAAUE,KAAvB,CACAnB,QAAQ,CAAC,CACLO,IAAI,CAAC,WADA,CAELC,OAAO,CAACU,MAFH,CAAD,CAAR,CAKA;AACH,CARD,EASH,CAVD,CAWAzB,SAAS,CAAC,IAAI,CACXsB,SAAS,GACT;AACF,CAHQ,CAGN,CAAChB,IAAD,CAHM,CAAT,CAKA,mBACI,sCACI,YAAK,SAAS,CAAC,WAAf,uBACI,eAAQ,SAAS,CAAC,WAAlB,CAA8B,YAAY,CAAEA,IAA5C,CAAkD,QAAQ,CAAEE,YAA5D,UAEQP,MAAM,EAAIA,MAAM,CAAC0B,MAAP,CAAgB,CAA1B,EAAgC1B,MAAM,CAAC2B,GAAP,CAAYtB,IAAD,EAAQ,CAC/C,mBACI,gBAA8C,KAAK,CAAEA,IAAI,CAACA,IAA1D,WACKA,IAAI,CAACA,IADV,QACoBA,IAAI,CAACuB,UADzB,aAAgBvB,IAAI,CAACwB,UAArB,SAAkCxB,IAAI,CAACW,GAAvC,EADJ,CAKH,CAN+B,CAFxC,EADJ,EADJ,EADJ,CAiBH,CAzDD,CA2DA,cAAeb,sBAAf"},"metadata":{},"sourceType":"module"}